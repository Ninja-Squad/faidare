<faidare-loading-spinner [loading]="loading" class="float-right"></faidare-loading-spinner>

<ng-container *ngIf="location">
  <h3 class="mb-4">
    Site: {{ location.locationName }}


  </h3>

  <faidare-map [locations]="[location]"></faidare-map>



  <faidare-card-section
    header="Details">
    <ng-template>
      <div class="card-body card-section-body">

         <!-- Display generic document details (PUI, data source links, etc.) -->
        <faidare-card-generic-document
          [document]="location"
          documentType="location">
        </faidare-card-generic-document>

        <faidare-card-row
          label="Abbreviation"
          [value]="location.abbreviation">
        </faidare-card-row>

        <faidare-card-row
          label="Type"
          [value]="location.locationType">
        </faidare-card-row>

        <faidare-card-row
          label="Status"
          [test]="location.additionalInfo['Site status']">
          <ng-template>
            {{ location.additionalInfo['Site status'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Institution/Landowner"
          [value]="location.institutionName">
        </faidare-card-row>

        <faidare-card-row
          label="Institution address"
          [value]="location.institutionAddress">
        </faidare-card-row>

        <faidare-card-row
          label="Coordinates precision"
          [test]="location.additionalInfo['Coordinates precision']">
          <ng-template>
            {{ location.additionalInfo['Coordinates precision'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Latitude"
          [test]="location.latitude">
          <ng-template>
            {{ location.latitude }} ({{ location.latitude | coordinates:type.ToDegrees:direction.Latitude }})
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Longitude"
          [test]="location.longitude">
          <ng-template>
            {{ location.longitude }} ({{ location.longitude | coordinates:type.ToDegrees:direction.Longitude }})
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Geographical location"
          [test]="location.additionalInfo['Geographical location']">
          <ng-template>
            {{ location.additionalInfo['Geographical location'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Country name"
          [test]="location.countryName && !location.additionalInfo['Geographical location']">
          <ng-template>
            {{ location.countryName }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Country code"
          [test]="location.countryCode && !location.additionalInfo['Geographical location']">
          <ng-template>
            {{ location.countryCode }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Altitude"
          [value]="location.altitude">
        </faidare-card-row>

        <faidare-card-row
          label="Slope"
          [value]="location.additionalInfo['Slope']">
        </faidare-card-row>

        <faidare-card-row
          label="Exposure"
          [test]="location.additionalInfo['Exposure']">
          <ng-template>
            {{ location.additionalInfo['Exposure'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Topography"
          [test]="location.additionalInfo['Topography']">
          <ng-template>
            {{ location.additionalInfo['Topography'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Environment type"
          [test]="location.additionalInfo['Environment type']">
          <ng-template>
            {{ location.additionalInfo['Environment type'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Distance to city"
          [test]="location.additionalInfo['Distance to city']">
          <ng-template>
            {{ location.additionalInfo['Distance to city'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Direction from city"
          [test]="location.additionalInfo['Direction from city']">
          <ng-template>
            {{ location.additionalInfo['Direction from city'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Comment"
          [test]="location.additionalInfo['Comment']">
          <ng-template>
            {{ location.additionalInfo['Comment'] }}
          </ng-template>
        </faidare-card-row>

      </div>
    </ng-template>
  </faidare-card-section>

  <faidare-card-section
    header="Additional information"
    [test]="additionalInfos && additionalInfos.length > 0">
    <ng-template>
      <div class="card-body card-section-body">

        <ng-container *ngFor="let additionalInfo of additionalInfos">
          <faidare-card-row
            [label]="additionalInfo.key"
            [value]="additionalInfo.value">
          </faidare-card-row>
        </ng-container>

      </div>
    </ng-template>
  </faidare-card-section>

  <!--XRefs part -->
  <faidare-xrefs [xrefId]="location.locationDbId"></faidare-xrefs>

</ng-container>
