<faidare-loading-spinner [loading]="loading" class="float-right"></faidare-loading-spinner>

<div class="text-right back-form-button">
  <button type="button" class="btn btn-secondary mt-1" routerLink="/">
    <span> < Back to form </span>
  </button>
</div>

<ng-container *ngIf="location">
  <h3 class="mb-4">
    Site: {{ location.locationName }}


  </h3>

  <faidare-map [locations]="[location]"></faidare-map>



  <faidare-card-section
    header="Details">
    <ng-template>
      <div class="card-body card-section-body">

        <faidare-card-row
          label="Source"
          [test]="location">
          <ng-template>
            <a target="_blank"
               [href]="locationSource['schema:url']">
              <img [src]="locationSource['schema:image']" alt="Location source image" style="height: 60px"/>
            </a>
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Data source"
          [test]="location && location['schema:identifier'] && location.documentationURL">
          <ng-template>
            <a target="_blank" [href]="location.documentationURL">
              Link to this site on {{ location['schema:name'] }}
            </a>
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Abbreviation"
          [value]="location.abbreviation">
        </faidare-card-row>

        <faidare-card-row
          label="Type"
          [value]="location.locationType">
        </faidare-card-row>

        <faidare-card-row
          label="Status"
          [test]="location.additionalInfo['Site status']">
          <ng-template>
            {{ location.additionalInfo['Site status'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Institution/Landowner"
          [value]="location.institutionName">
        </faidare-card-row>

        <faidare-card-row
          label="Institution address"
          [value]="location.institutionAddress">
        </faidare-card-row>

        <faidare-card-row
          label="Coordinates precision"
          [test]="location.additionalInfo['Coordinates precision']">
          <ng-template>
            {{ location.additionalInfo['Coordinates precision'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Latitude"
          [test]="location.latitude">
          <ng-template>
            {{ location.latitude }} ({{ location.latitude | coordinates:type.ToDegrees:direction.Latitude }})
          </ng-template>
        </gpds-card-row>

        <faidare-card-row
          label="Longitude"
          [test]="location.longitude">
          <ng-template>
            {{ location.longitude }} ({{ location.longitude | coordinates:type.ToDegrees:direction.Longitude }})
          </ng-template>
        </gpds-card-row>

        <faidare-card-row
          label="Geographical location"
          [test]="location.additionalInfo['Geographical location']">
          <ng-template>
            {{ location.additionalInfo['Geographical location'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Country name"
          [test]="location.countryName && !location.additionalInfo['Geographical location']">
          <ng-template>
            {{ location.countryName }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Country code"
          [test]="location.countryCode && !location.additionalInfo['Geographical location']">
          <ng-template>
            {{ location.countryCode }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Altitude"
          [value]="location.altitude">
        </faidare-card-row>

        <faidare-card-row
          label="Slope"
          [value]="location.additionalInfo['Slope']">
        </faidare-card-row>

        <faidare-card-row
          label="Exposure"
          [test]="location.additionalInfo['Exposure']">
          <ng-template>
            {{ location.additionalInfo['Exposure'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Topography"
          [test]="location.additionalInfo['Topography']">
          <ng-template>
            {{ location.additionalInfo['Topography'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Environment type"
          [test]="location.additionalInfo['Environment type']">
          <ng-template>
            {{ location.additionalInfo['Environment type'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Distance to city"
          [test]="location.additionalInfo['Distance to city']">
          <ng-template>
            {{ location.additionalInfo['Distance to city'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Direction from city"
          [test]="location.additionalInfo['Direction from city']">
          <ng-template>
            {{ location.additionalInfo['Direction from city'] }}
          </ng-template>
        </faidare-card-row>

        <faidare-card-row
          label="Comment"
          [test]="location.additionalInfo['Comment']">
          <ng-template>
            {{ location.additionalInfo['Comment'] }}
          </ng-template>
        </faidare-card-row>

      </div>
    </ng-template>
  </faidare-card-section>

  <faidare-card-section
    header="Additional information"
    [test]="additionalInfos && additionalInfos.length > 0">
    <ng-template>
      <div class="card-body card-section-body">

        <ng-container *ngFor="let additionalInfo of additionalInfos">
          <faidare-card-row
            [label]="additionalInfo.key"
            [value]="additionalInfo.value">
          </faidare-card-row>
        </ng-container>

      </div>
    </ng-template>
  </faidare-card-section>

  <!--XRefs part -->
  <faidare-xrefs [xrefId]="location.locationDbId"></faidare-xrefs>

</ng-container>
