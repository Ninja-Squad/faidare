<gpds-loading-spinner [loading]="loading" class="float-right"></gpds-loading-spinner>

<ng-container *ngIf="germplasmGnpis">
  <h3 class="mb-4">
    <img *ngIf="germplasmGnpis.holdingGenbank && germplasmGnpis.holdingGenbank.instituteName"
         [src]="IMAGES_BRC_URL"
         align="right"/>
    Germplasm: {{ germplasmGnpis.germplasmName }}
  </h3>

  <!-- Display the map -->
  <gpds-map [locations]="germplasmLocations"></gpds-map>

  <div class="row align-items-center">

    <!--Templates for gerplasm card-->
    <ng-template #holdingInstituteTemplate>

      <gpds-card-row
        label=""
        [test]="germplasmGnpis.holdingInstitute && germplasmGnpis.holdingInstitute.logo">
        <ng-template>
          <img
            [src]="IMAGES_INSTITUTION_URL + germplasmGnpis.holdingInstitute.logo"/>
        </ng-template>
      </gpds-card-row>

      <gpds-card-row
        label="Code"
        [value]="germplasmGnpis.holdingInstitute.instituteCode">
      </gpds-card-row>

      <gpds-card-row
        label="Acronym"
        [value]="germplasmGnpis.holdingInstitute.acronym">
      </gpds-card-row>

      <gpds-card-row
        label="Organisation"
        [value]="germplasmGnpis.holdingInstitute.organisation">
      </gpds-card-row>

      <gpds-card-row
        label="Type"
        [value]="germplasmGnpis.holdingInstitute.instituteType">
      </gpds-card-row>

      <gpds-card-row
        label="Address"
        [value]="germplasmGnpis.holdingInstitute.address">
      </gpds-card-row>

      <gpds-card-row
        label="Website"
        [test]="germplasmGnpis.holdingInstitute.webSite">
        <ng-template>
          <a [href]="germplasmGnpis.breeder.institute.webSite">
            {{ germplasmGnpis.holdingInstitute.webSite }}
          </a>
        </ng-template>
      </gpds-card-row>

    </ng-template>


    <ng-template #BreederInstituteTemplate>

      <gpds-card-row
        label=""
        [test]="germplasmGnpis.breeder && germplasmGnpis.breeder.institute && germplasmGnpis.breeder.institute.logo">
        <ng-template>
          <img
            [src]="IMAGES_INSTITUTION_URL + germplasmGnpis.breeder.institute.logo"/>
        </ng-template>
      </gpds-card-row>

      <gpds-card-row
        label="Code"
        [value]="germplasmGnpis.breeder.institute.instituteCode">
      </gpds-card-row>

      <gpds-card-row
        label="Acronym"
        [value]="germplasmGnpis.breeder.institute.acronym">
      </gpds-card-row>

      <gpds-card-row
        label="Organisation"
        [value]="germplasmGnpis.breeder.institute.organisation">
      </gpds-card-row>

      <gpds-card-row
        label="Type"
        [value]="germplasmGnpis.breeder.institute.instituteType">
      </gpds-card-row>

      <gpds-card-row
        label="Address"
        [value]="germplasmGnpis.breeder.institute.address">
      </gpds-card-row>

      <gpds-card-row
        label="Website"
        [test]="germplasmGnpis.breeder.institute.webSite">
        <ng-template>
          <a [href]="germplasmGnpis.breeder.institute.webSite">
            {{ germplasmGnpis.breeder.institute.webSite }}
          </a>
        </ng-template>
      </gpds-card-row>

    </ng-template>

    <ng-template #CollectorInstituteTemplate>

      <gpds-card-row
        label=""
        [test]="germplasmGnpis.collector && germplasmGnpis.collector.institute && germplasmGnpis.collector.institute.logo">
        <ng-template>
          <img
            [src]="IMAGES_INSTITUTION_URL + germplasmGnpis.collector.institute.logo"/>
        </ng-template>
      </gpds-card-row>

      <gpds-card-row
        label="Code"
        [value]="germplasmGnpis.collector.instituteCode">
      </gpds-card-row>

      <gpds-card-row
        label="Acronym"
        [value]="germplasmGnpis.collector.acronym">
      </gpds-card-row>

      <gpds-card-row
        label="Organisation"
        [value]="germplasmGnpis.collector.organisation">
      </gpds-card-row>

      <gpds-card-row
        label="Address"
        [value]="germplasmGnpis.collector.institute.address">
      </gpds-card-row>

      <gpds-card-row
        label="Website"
        [test]="germplasmGnpis.collector.institute.webSite">
        <ng-template>
          <a [href]="germplasmGnpis.collector.institute.webSite">
            {{ germplasmGnpis.collector.institute.webSite }}
          </a>
        </ng-template>
      </gpds-card-row>

    </ng-template>


    <!--Section for the image representing the germplasm and the details about this image-->
    <div class="col-auto field" *ngIf="germplasmGnpis.photo && germplasmGnpis.photo.thumbnailFileName">
      <a class="btn popovers" data-boundary="window" placement="right" [ngbPopover]="imageTemplate"
         [popoverTitle]="germplasmGnpis.photo.photoName" container="body">
        <img
          [src]="IMAGES_ACCESSION_URL + germplasmGnpis.holdingGenbank.instituteCode + '/' + germplasmGnpis.photo.thumbnailFileName"
          class="img-fluid">
        <figcaption class="figure-caption">
          Click to see more details
        </figcaption>
      </a>

      <ng-template #imageTemplate>
        <div class="card ngb-popover-window ">
          <img class="card-img-top"
               [src]="IMAGES_ACCESSION_URL + germplasmGnpis.holdingGenbank.instituteCode + '/' + germplasmGnpis.photo.fileName"
               alt="" width="250px">
          <div class="card-body">

            <gpds-card-row
              label="Accession name"
              [value]="germplasmGnpis.germplasmName">
            </gpds-card-row>

            <gpds-card-row
              label="Photo name"
              [value]="germplasmGnpis.photo.photoName">
            </gpds-card-row>

            <gpds-card-row
              label="Description"
              [value]="germplasmGnpis.photo.description">
            </gpds-card-row>

            <gpds-card-row
              label="Copyright"
              [value]="'Â© '+germplasmGnpis.photo.copyright">
            </gpds-card-row>
          </div>
        </div>
      </ng-template>
    </div>

    <!--Section for the information about the identification of the germplasm-->
    <gpds-card-section
      class="col-12 col-lg"
      header="Identification">
      <ng-template>
        <div class="card-body card-section-body">

          <gpds-card-row
            label="Germplasm name"
            [value]="germplasmGnpis.germplasmName">
          </gpds-card-row>

          <gpds-card-row
            label="Accession number"
            [value]="germplasmGnpis.accessionNumber">
          </gpds-card-row>

          <gpds-card-row
            label="Permanent Unique Identifier"
            [value]="germplasmGnpis.germplasmPUI">
          </gpds-card-row>

          <gpds-card-row
            label="Accession synonyms"
            [test]="germplasmGnpis.synonyms && germplasmGnpis.synonyms.length > 0">
            <ng-template>
              {{ germplasmGnpis.synonyms.join(', ') }}
            </ng-template>
          </gpds-card-row>

          <gpds-card-row
            label="Taxon"
            [test]="germplasmGnpis.genus || germplasmGnpis.species || germplasmGnpis.subtaxa">
            <ng-template>
              <i>{{ germplasmGnpis.genus }} {{ germplasmGnpis.species }} {{ germplasmGnpis.subtaxa }}</i>
              {{ germplasmGnpis.speciesAuthority ? '(' + germplasmGnpis.speciesAuthority + ')' : '' }}
            </ng-template>
          </gpds-card-row>

          <gpds-card-row
            label="Taxon common names"
            [test]="germplasmGnpis.taxonCommonNames && germplasmGnpis.taxonCommonNames.length > 0">
            <ng-template>
              {{ germplasmGnpis.taxonCommonNames.join(', ') }}
            </ng-template>
          </gpds-card-row>

          <gpds-card-row
            label="Taxon synonyms"
            [test]="germplasmGnpis.taxonSynonyms && germplasmGnpis.taxonSynonyms.length > 0">
            <ng-template>
              <i>{{ germplasmGnpis.taxonSynonyms.join(', ') }}</i>
            </ng-template>
          </gpds-card-row>

          <gpds-card-row
            label="Biological status"
            [value]="germplasmGnpis.biologicalStatusOfAccessionCode">
          </gpds-card-row>

          <gpds-card-row
            label="Genetic nature"
            [value]="germplasmGnpis.geneticNature">
          </gpds-card-row>

          <gpds-card-row
            label="Seed source"
            [value]="germplasmGnpis.seedSource">
          </gpds-card-row>

          <gpds-card-row
            label="Pedigree"
            [value]="germplasmGnpis.pedigree">
          </gpds-card-row>

          <gpds-card-row
            label="Comments"
            [value]="germplasmGnpis.comment">
          </gpds-card-row>

        </div>
      </ng-template>
    </gpds-card-section>
  </div>

  <!--Section for the information about the holding of the germplasm-->
  <gpds-card-section
    header="Holding"
    [test]="germplasmGnpis.holdingInstitute">
    <ng-template>
      <div class="card-body card-section-body">

        <gpds-card-row
          label="Institution">
          <ng-template>
            <a class="popover-underline" data-boundary="window" placement="top"
               [ngbPopover]="holdingInstituteTemplate"
               [popoverTitle]="germplasmGnpis.holdingInstitute.instituteName"
               container="body">
              {{ germplasmGnpis.holdingInstitute.instituteName }}</a>
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Stock center name"
          [test]="germplasmGnpis.holdingGenbank.instituteName && germplasmGnpis.holdingGenbank.webSite">
          <ng-template>
            <a [href]="germplasmGnpis.holdingGenbank.webSite">
              {{ germplasmGnpis.holdingGenbank.instituteName }}
            </a>
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Stock center name"
          [test]="germplasmGnpis.holdingGenbank.instituteName && !germplasmGnpis.holdingGenbank.webSite">
          <ng-template>
            {{ germplasmGnpis.holdingGenbank.instituteName }}
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Presence status"
          [value]="germplasmGnpis.presenceStatus">
        </gpds-card-row>

      </div>
    </ng-template>
  </gpds-card-section>


  <gpds-card-section
    header="Collecting"
    [test]="checkOriginCollecting()">
    <ng-template>
      <div class="card-body card-section-body">

        <gpds-card-row
          label="Origin site"
          [test]="germplasmGnpis.originSite && germplasmGnpis.originSite.siteName">
          <ng-template>
            <a [routerLink]="['/sites/', germplasmGnpis.originSite.siteId]">
              {{ germplasmGnpis.originSite.siteName }}
            </a>
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Collecting site"
          [test]="germplasmGnpis.collectingSite && germplasmGnpis.collectingSite.siteName">
          <ng-template>
            <a [routerLink]="['/sites/', germplasmGnpis.collectingSite.siteId]">
              {{ germplasmGnpis.collectingSite.siteName }}
            </a>
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Material type"
          [test]="germplasmGnpis.collector && germplasmGnpis.collector.materialType">
          <ng-template>
            {{ germplasmGnpis.collector.materialType }}
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Collectors"
          [test]="germplasmGnpis.collector && germplasmGnpis.collector.collectors">
          <ng-template>
            {{ germplasmGnpis.collector.collectors }}
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Acquisition/Creation date"
          [test]="germplasmGnpis.collector.accessionCreationDate">
          <ng-template>
            {{ germplasmGnpis.collector.accessionCreationDate | amParse:'YYYYMMDD' | amDateFormat:'YYYY-MM-DD' }}
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Acquisition/Creation date"
          [test]="germplasmGnpis.acquisitionDate && !germplasmGnpis.collector.accessionCreationDate">
          <ng-template>
            {{ germplasmGnpis.acquisitionDate }}
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Institution"
          [test]="germplasmGnpis.collector.institute && germplasmGnpis.collector.institute.instituteName">
          <ng-template>
            <a class="popovers" placement="top"
               [ngbPopover]="CollectorInstituteTemplate"
               [popoverTitle]="germplasmGnpis.collector.institute.instituteName">
              {{ germplasmGnpis.collector.institute.instituteName }}
            </a>
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Accession number"
          [test]="germplasmGnpis.collector && germplasmGnpis.collector.accessionNumber">
          <ng-template>
            {{ germplasmGnpis.collector.accessionNumber }}
          </ng-template>
        </gpds-card-row>
      </div>
    </ng-template>
  </gpds-card-section>

  <gpds-card-section
    header="Breeder"
    [test]="checkBreeder()">
    <ng-template>
      <div class="card-body card-section-body">

        <gpds-card-row
          label="Institute"
          [test]="germplasmGnpis.breeder.institute && germplasmGnpis.breeder.institute.instituteName">
          <ng-template>
            <a class="popovers" placement="top"
               [ngbPopover]="BreederInstituteTemplate"
               [popoverTitle]="germplasmGnpis.breeder.institute.instituteName">
              {{ germplasmGnpis.breeder.institute.instituteName }}
            </a>
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Accession creation year"
          [value]="germplasmGnpis.breeder.accessionCreationDate ">
        </gpds-card-row>

        <gpds-card-row
          label="Accession number"
          [value]="germplasmGnpis.breeder.accessionNumber">
        </gpds-card-row>

        <gpds-card-row
          label="Catalog registration year"
          [value]="germplasmGnpis.breeder.registrationYear">
        </gpds-card-row>

        <gpds-card-row
          label="Catalog deregistration year"
          [value]="germplasmGnpis.breeder.deregistrationYear">
        </gpds-card-row>
      </div>
    </ng-template>
  </gpds-card-section>

  <gpds-card-section
    header="Donation"
    [test]="germplasmGnpis.donors && germplasmGnpis.donors.length > 0">
    <ng-template>
      <gpds-card-table
        [headers]="[
                'Institute name',
                'Institute code',
                'Donation date',
                'Accession number',
                'Accession PUI'
                ]"
        [rows]="germplasmGnpis.donors">
        <ng-template let-row>
          <tr>
            <ng-template #InstituteTemplate>

              <gpds-card-row
                label=""
                [test]="row.donorInstitute && row.donorInstitute.logo">
                <ng-template>
                  <img
                    [src]="IMAGES_INSTITUTION_URL + row.donorInstitute.logo"/>
                </ng-template>
              </gpds-card-row>

              <gpds-card-row
                label="Code"
                [value]="row.donorInstitute.instituteCode">
              </gpds-card-row>

              <gpds-card-row
                label="Acronym"
                [value]="row.donorInstitute.acronym">
              </gpds-card-row>

              <gpds-card-row
                label="Organisation"
                [value]="row.donorInstitute.organisation">
              </gpds-card-row>

              <gpds-card-row
                label="Type"
                [value]="row.donorInstitute.instituteType">
              </gpds-card-row>

              <gpds-card-row
                label="Address"
                [value]="row.donorInstitute.address">
              </gpds-card-row>

              <gpds-card-row
                label="Website"
                [test]="row.donorInstitute.webSite">
                <ng-template>
                  <a [href]=" row.donorInstitute.webSite ">
                    {{ row.donorInstitute.webSite }}
                  </a>
                </ng-template>
              </gpds-card-row>
            </ng-template>

            <td>
              <a class="popovers" placement="top"
                 [ngbPopover]="InstituteTemplate"
                 [popoverTitle]="row.donorInstitute.instituteName">
                {{ row.donorInstitute.instituteName }}
              </a>
            </td>
            <td>{{ row.donorInstituteCode }}</td>
            <td>{{ row.donationDate }}</td>
            <td>{{ row.donorAccessionNumber }}</td>
            <td>{{ row.donorGermplasmPUI }}</td>
          </tr>
        </ng-template>

      </gpds-card-table>
    </ng-template>
  </gpds-card-section>

  <gpds-card-section
    header="Distribution"
    [test]="germplasmGnpis.distributors && germplasmGnpis.distributors.length>0">
    <ng-template>

      <!--TODO : Add order column when ordering URL will be available-->
      <gpds-card-table
        [headers]="[
        'Institute',
        'Accession number',
        'Distribution status'

        ]"
        [rows]="germplasmGnpis.distributors">
        <ng-template let-row>
          <tr>
            <ng-template #InstituteTemplate>

              <gpds-card-row
                label=""
                [test]="row.institute && row.institute.logo">
                <ng-template>
                  <img
                    [src]="IMAGES_INSTITUTION_URL + row.institute.logo"/>
                </ng-template>
              </gpds-card-row>

              <gpds-card-row
                label="Code"
                [value]="row.institute.instituteCode">
              </gpds-card-row>

              <gpds-card-row
                label="Acronym"
                [value]="row.institute.acronym">
              </gpds-card-row>

              <gpds-card-row
                label="Organisation"
                [value]="row.institute.organisation">
              </gpds-card-row>

              <gpds-card-row
                label="Type"
                [value]="row.institute.instituteType">
              </gpds-card-row>

              <gpds-card-row
                label="Address"
                [value]="row.institute.address">
              </gpds-card-row>

              <gpds-card-row
                label="Website"
                [test]="row.institute.webSite">
                <ng-template>
                  <a [href]="row.institute.webSite">
                    {{ row.institute.webSite }}
                  </a>
                </ng-template>
              </gpds-card-row>
            </ng-template>

            <td>
              <a class="popovers" placement="top"
                 [ngbPopover]="InstituteTemplate"
                 [popoverTitle]="row.institute.instituteName">
                {{ row.institute.instituteName }}
              </a>
            </td>
            <td>{{ row.accessionNumber }}</td>
            <td>{{ row.distributionStatus }}</td>
            <!--<td>{{ '' }}</td>-->
          </tr>
        </ng-template>

      </gpds-card-table>

    </ng-template>
  </gpds-card-section>

  <gpds-card-section
    header="Evaluation Data"
    [test]="germplasmAttributes && germplasmAttributes.length > 0">
    <ng-template>
      <div class="card-body card-section-body">

        <ng-container *ngFor="let descriptor of germplasmAttributes">
          <gpds-card-row
            [label]="descriptor.attributeName"
            [value]="descriptor.value">
          </gpds-card-row>
        </ng-container>

      </div>
    </ng-template>
  </gpds-card-section>

  <gpds-card-section
    header="Genealogy"
    [test]="checkPedigree() || checkProgeny()">
    <ng-template>
      <div class="card-body card-section-body">

        <gpds-card-row
          label="Crossing plan"
          [test]="germplasmPedigree && germplasmPedigree.crossingPlan">
          <ng-template>
            {{ germplasmPedigree.crossingPlan }}
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Crossing year"
          [test]="germplasmPedigree && germplasmPedigree.crossingYear">
          <ng-template>
            {{ germplasmPedigree.crossingYear }}
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Family code"
          [test]="germplasmPedigree && germplasmPedigree.familyCode">
          <ng-template>
            {{ germplasmPedigree.familyCode }}
          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Parent accessions"
          [test]="germplasmPedigree && germplasmPedigree.parent1Name">

          <ng-template>
            <gpds-card-row
              [label]="germplasmPedigree.parent1Type"
              [test]="germplasmPedigree && germplasmPedigree.parent1DbId">
              <ng-template>
                <a [routerLink]="['/germplasm']"
                   [queryParams]="{id:germplasmPedigree.parent1DbId}">
                  {{ germplasmPedigree.parent1Name }}
                </a>
              </ng-template>
            </gpds-card-row>

            <gpds-card-row
              [label]="germplasmPedigree.parent2Type"
              [test]="germplasmPedigree && germplasmPedigree.parent2DbId">
              <ng-template>
                <a [routerLink]="['/germplasm']"
                   [queryParams]="{id:germplasmPedigree.parent2DbId}">
                  {{ germplasmPedigree.parent2Name }}
                </a>
              </ng-template>
            </gpds-card-row>

          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Sibling accessions"
          [test]="germplasmPedigree && (germplasmPedigree.siblings && germplasmPedigree.siblings.length > 0)">
          <ng-template>

            <div class="content-overflow">
              <ng-container *ngFor="let sibling of germplasmPedigree.siblings">
                <a [routerLink]="['/germplasm']" [queryParams]="{id:sibling.germplasmDbId }">
                  {{ sibling.defaultDisplayName }}
                </a>,
              </ng-container>
            </div>

          </ng-template>
        </gpds-card-row>

        <gpds-card-row
          label="Descendant :"
          [test]="checkProgeny()">
        </gpds-card-row>

        <div class="content-overflow-big">
          <ng-container *ngFor="let child of germplasmProgeny">

            <gpds-card-row class="text"
                           [label]="child.secondParentName ? 'child(ren) of ' + child.firstParentName + ' x ' + child.secondParentName : 'child(ren) of ' + child.firstParentName"
                           [test]="checkProgeny()">
              <ng-template>

                <ng-container *ngFor="let sibling of child.sibblings">
                  <a [routerLink]="['/germplasm']" [queryParams]="{id:sibling.pui}">
                    {{ sibling.name }}
                  </a>,
                </ng-container>

              </ng-template>
            </gpds-card-row>
          </ng-container>
        </div>

      </div>
    </ng-template>
  </gpds-card-section>

  <gpds-card-section
    header="Population"
    [test]="germplasmGnpis.population && germplasmGnpis.population.length > 0">
    <ng-template>
      <div class="card-body card-section-body card-section-body">

        <ng-container *ngFor="let population of germplasmGnpis.population">

          <gpds-card-row
            [label]="population.type ? population.name + ' (' + population.type + ')' : population.name"
            [test]="population.germplasmRef && population.germplasmRef.pui && population.germplasmRef.pui != germplasmGnpis.germplasmDbId">
            <ng-template>
              <a [routerLink]="['/germplasm']"
                 [queryParams]="{id:population.germplasmRef.pui}">
                {{ population.germplasmRef.name }}
              </a> is composed by <a
              [routerLink]="['/']"
              [queryParams]="{germplasmLists: population.name, types: 'Germplasm'}">
              {{ population.germplasmCount }} accessions
            </a>
            </ng-template>
          </gpds-card-row>
          <gpds-card-row
            [label]="population.type ? population.name + ' (' + population.type + ')' : population.name"
            [test]="population.germplasmRef && population.germplasmRef.pui && population.germplasmRef.pui == germplasmGnpis.germplasmDbId">
            <ng-template>
              {{ population.germplasmRef.name }} is composed by <a
              [routerLink]="['/']"
              [queryParams]="{germplasmLists: population.name, types: 'Germplasm'}">
              {{ population.germplasmCount }} accessions
            </a>
            </ng-template>
          </gpds-card-row>
          <gpds-card-row
            [label]="population.type ? population.name + ' (' + population.type + ')' : population.name"
            [test]="population.germplasmRef && !population.germplasmRef.pui">
            <ng-template>
              <a [routerLink]="['/']"
                 [queryParams]="{germplasmLists: population.name, types: 'Germplasm'}">
                {{ population.germplasmCount }} accessions
              </a>
            </ng-template>
          </gpds-card-row>
        </ng-container>

      </div>
    </ng-template>
  </gpds-card-section>

  <gpds-card-section
    header="Collection"
    [test]="germplasmGnpis.collection && germplasmGnpis.collection.length > 0">
    <ng-template>
      <div class="card-body card-section-body">

        <ng-container *ngFor="let collection of germplasmGnpis.collection">
          <gpds-card-row
            [label]="collection.type ? collection.name + ' (' + collection.type + ')' : collection.name">
            <ng-template>
              <a [routerLink]="['/']"
                 [queryParams]="{germplasmLists: collection.name, types: 'Germplasm'}">
                {{ collection.germplasmCount }} accessions
              </a>
            </ng-template>
          </gpds-card-row>
        </ng-container>

      </div>
    </ng-template>
  </gpds-card-section>


  <gpds-card-section
    header="Panel"
    [test]="germplasmGnpis.panel && germplasmGnpis.panel.length > 0">
    <ng-template>
      <div class="card-body card-section-body">

        <ng-container *ngFor="let panel of germplasmGnpis.panel">
          <gpds-card-row
            [label]="panel.type ? panel.name + ' (' + panel.type + ')' : panel.name">
            <ng-template>
              <a [routerLink]="['/']"
                 [queryParams]="{germplasmLists: panel.name, types: 'Germplasm'}">
                {{ panel.germplasmCount }} accessions
              </a>
            </ng-template>
          </gpds-card-row>
        </ng-container>

      </div>
    </ng-template>
  </gpds-card-section>


  </div>


  <!--XRefs part -->
 <gpds-xrefs [xrefId]="germplasmGnpis.germplasmPUI"></gpds-xrefs>
</ng-container>

